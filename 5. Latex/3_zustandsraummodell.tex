\pagestyle{aaron}
\section{Zustandsraumdarstellung} \label{sec:Zustandsraumdarstellung}

Um das Verhalten mittels mathematischer Beziehungen zu veranschaulichen, wird die \textbf{Zustandsraumdarstellung} verwendet. Der \textbf{Systemeingang} wird festgelegt mit

\begin{equation} \label{eq:Gleichung3.1}
    \underline{u} = V_{\mathrm{m}},
\end{equation}
\newline
wobei $V_{\mathrm{m}}$ die Eingangsspannung des Gleichstrommotors aus \autoref{eq:Gleichung2.1} ist. Die \textbf{Systemzustände} des Schwungrad-Pendels sind:

\begin{align}
    \underline{x} &=
    \begin{bmatrix} \label{eq:Gleichung3.2}
        x_{\mathrm{1}} \\
        x_{\mathrm{2}} \\
        x_{\mathrm{3}} \\
        x_{\mathrm{4}}
    \end{bmatrix} =
    \begin{bmatrix}
        \varphi     \\
        \dot\varphi \\
        \theta      \\
        \dot\theta
    \end{bmatrix}
\end{align}
\newline
Nach zeitlicher Ableitung des Zustandsvektors ergibt sich der \textbf{Vektor der Zustandsänderung} zu:

\begin{align}
    \underline{\dot{x}} &=
    \begin{bmatrix} \label{eq:Gleichung3.3}
        \dot x_{\mathrm{1}} \\
        \dot x_{\mathrm{2}} \\
        \dot x_{\mathrm{3}} \\
        \dot x_{\mathrm{4}}
    \end{bmatrix} =
    \begin{bmatrix}
        \dot\varphi     \\
        \ddot\varphi    \\
        \dot\theta      \\
        \ddot\theta
    \end{bmatrix}
\end{align}
\newline
Die \textbf{Ausgänge des Systems} ergeben sich zu

\begin{align}
    \underline{y} &=
    \begin{bmatrix} \label{eq:Gleichung3.4}
        \varphi     \\
        \theta      \\
    \end{bmatrix}.
\end{align}

<<<<<<< HEAD
\subsection{Nichtlineares Zustandsraummodell} \label{sec:nichtlinearesZustandsraummodell}
=======
\subsection{Nichtlineares Zustandsraummodell}\label{cap:nichtlinearesZustandsraummodell}
>>>>>>> ccf88e87aedbdd031b312c4a0ee7969696ddeb41

Zum Aufstellen des nichtlinearen Zustandsraummodells werden die \autoref{eq:Gleichung2.12} und \autoref{eq:Gleichung2.14} nach den höchsten Ableitungen von $\ddot\varphi$ und $\ddot\theta$ umgestellt.

\begin{align} \label{eq:Gleichung3.5}
    \begin{split}
        \ddot\varphi &= \frac{K_{\mathrm{t}} \frac{V_{\mathrm{m}} - K_{\mathrm{b}} \dot\varphi}{R_{\mathrm{a}}} - c_2 \dot\varphi - J_2 \cdot \ddot\theta}{J_2} \\
        \ddot\theta &= \frac{-J_2 \ddot\varphi - c_1 \dot\theta + \left( m_1 l_1 + m_2 l_2\right) g \sin(\theta)}{m_1 l_1^2 + m_2 l_2^2 + J_1 + J_2}
    \end{split}
\end{align}
\newline
Beide Gleichungen sind über die die Winkelbeschleunigung des Schwungrades $\ddot\varphi$ und die des Pendels $\ddot\theta$ miteinander verkoppelt. Durch das gegenseitige ineinander Einsetzen werden die Abhängigkeiten eliminiert.

\begin{align} \label{eq:Gleichung3.6}
    \begin{split}
        \ddot\varphi &= \frac{K_{\mathrm{t}} \frac{V_{\mathrm{m}} - K_{\mathrm{b}} \dot\varphi}{R_{\mathrm{a}}} - c_2 \dot\varphi - J_2 \cdot \left( \frac{-J_2 \ddot\varphi - c_1 \dot\theta + \left( m_1 l_1 + m_2 l_2\right) g \sin(\theta)}{m_1 l_1^2 + m_2 l_2^2 + J_1 + J_2}\right)}{J_2} \\
        \ddot\theta &= \frac{-J_2 \left( \frac{K_{\mathrm{t}} \frac{V_{\mathrm{m}} - K_{\mathrm{b}} \dot\varphi}{R_{\mathrm{a}}} - c_2 \dot\varphi - J_2 \cdot \ddot\theta}{J_2}\right) - c_1 \dot\theta + \left( m_1 l_1 + m_2 l_2\right) g \sin(\theta)}{m_1 l_1^2 + m_2 l_2^2 + J_1 + J_2}
    \end{split}
\end{align}
\newline
Mit Hilfe der Gleichungen \ref{eq:Gleichung3.1}, \ref{eq:Gleichung3.2} und \ref{eq:Gleichung3.3}, durch das Einsetzen in \autoref{eq:Gleichung3.6} und dem Zusammenfassen und Umstellen nach $\ddot\varphi$ \bzw $\ddot\theta$ folgt das \textbf{nichtlineare Zustandsraummodell}.

\begin{empheq}[box=\widefbox]{align} \label{eq:Gleichung3.7}
    \underline{\dot x} =
    \begin{bmatrix}
        x_{\mathrm{2}} \\
        \frac{\frac{K_{\mathrm{t}} \cdot \frac{V_{\mathrm{m}} - K_{\mathrm{b}} \cdot x_4}{R_{\mathrm{a}}} - c_2 \cdot x_4 - \left( m_1 l_1 + m_2 l_2\right) g\sin(x_1) + c_1 \cdot x_2}{J_2}}{1 - \frac{m_1 l_1^2 + m_2 l_2^2 + J_1 + J_2}{J_2}} \\
        x_{\mathrm{4}} \\
        \frac{\frac{\left( m_1 l_1 + m_2 l_2\right) g\sin(x_1) - c_1 \cdot x_2 - \left( m_1 l_1^2 + m_2 l_2^2 + J_1 + J_2\right) \cdot \frac{K_{\mathrm{t}} \cdot \frac{V_{\mathrm{m}} - K_{\mathrm{b}} \cdot x_4}{R_{\mathrm{a}}}}{J_2}}{J_2}}{1 - \frac{m_1 l_1^2 + m_2 l_2^2 + J_1 + J_2}{J_2}}
    \end{bmatrix}
\end{empheq}

\subsection{Lineares Zustandsraummodell}

Das Verhalten des nichtlinearen Systems ist für große Änderungen des Eingangssignals nicht vorhersehbar. Um dennoch Aussagen über das Systemverhalten treffen zu können, wird das nichtlineare Zustandsraummodell mithilfe der Taylorreihenentwicklung um eine Ruhelage ($\underline{x}^{*}$) linearisiert. Die nichtlinearen Restglieder $\underline{R}(\Delta{\underline{x}^2}, \Delta{\underline{u}^2})$ werden zu Null angenommen. Durch die Linearisierung wird das Systemverhalten für kleine Änderungen um die Ruhelage kontrollierbar. Nachfolgend ist die Taylorreihenentwicklung für Linearisierung aufgeführt:

\begin{align} \label{eq:Gleichung3.8}
    \begin{split}
        \dot{\underline{x}}^{*}+\Delta{\dot{\underline{x}}} &=\underline{f}(\underline{x}^{*}+\Delta{\underline{x}},\underline{u}^{*}+\Delta{\underline{u}}) \\
        &=\underline{f}(\underline{x}^{*},\underline{u}^{*})+\left[\frac{\partial f_{\mathrm{i}}}{\partial x_{\mathrm{j}}}\right]_{(\underline{x}^{*}, \underline{u}^{*})}\cdot\Delta{\underline{x}}+\left[\frac{\partial f_{\mathrm{i}}}{\partial u_{\mathrm{j}}}\right]_{(\underline{x}^{*},\underline{u}^{*})}\cdot\Delta{\underline{u}}+\underline{R}(\Delta{\underline{x}^2}, \Delta{\underline{u}^2})
    \end{split}
\end{align}
\newline
Durch die Annahme über das Verhalten der nichtlinearen Restglieder folgt die Struktur des linearen Zustandsraummodells dargestellt in \autoref{eq:Gleichung3.9}.

\begin{align} \label{eq:Gleichung3.9}
    \begin{split}
        \Delta\dot{\underline{x}} &= \left[\frac{\partial f_{\mathrm{i}}}{\partial x_{\mathrm{j}}}\right]_{(\underline{x}^{*}, \underline{u}^{*})}\cdot\Delta{\underline{x}}+\left[\frac{\partial f_{\mathrm{i}}}{\partial u_{\mathrm{j}}}\right]_{(\underline{x}^{*},\underline{u}^{*})}\cdot\Delta{\underline{u}} \\   
        \Delta{\underline{y}} &= \left[\frac{\partial h_{\mathrm{i}}}{\partial x_{\mathrm{j}}}\right]_{(\underline{x}^{*}, \underline{u}^{*})}\cdot\Delta{\underline{x}}+\left[\frac{\partial h_{\mathrm{i}}}{\partial u_{\mathrm{j}}}\right]_{(\underline{x}^{*},\underline{u}^{*})}\cdot\Delta{\underline{u}}
    \end{split}
\end{align}
\newline
Um das linearisierte Zustandsraummodell zu erhalten, werden die einzelnen Gleichungen des nichtlinearen Zustandsraummodells aus \autoref{eq:Gleichung3.7} nach den Zuständen $x_{\mathrm{1}}$ bis $x_{\mathrm{4}}$, sowie dem Eingang $V_{\mathrm{m}}$ partiell abgeleitet und die Ruhelage $\underline{x}^{*}$ eingesetzt. Dabei werden sowohl die Ruhelage des hängenden Pendels (untere Ruhelage) und die des stehenden Pendels (obere Ruhelage) betrachtet. In \autoref{eq:Gleichung3.10} dargestellt ist die untere Ruhelage, mit Hilfe derer das lineare Zustandsraummodell für das hängende Pendel bestimmt werden kann. Anhand dessen kann das lineare Zustandsraummodell in Simulink mit dem nichtlinearen Zustandsraummodell im nachfolgenden Abschnitt (\autoref{sec:Vergleich}) verglichen werden.

\begin{align}\label{eq:Gleichung3.10}
    \begin{split}
        \underline{x}_{\mathrm{1}}^{*}=
        \begin{bmatrix}
            x_{\mathrm{1}}^{*} \\
            x_{\mathrm{2}}^{*} \\
            x_{\mathrm{3}}^{*} \\
            x_{\mathrm{4}}^{*}
        \end{bmatrix}=
        \begin{bmatrix}
            \pi \\
            0   \\
            0   \\
            0
        \end{bmatrix}
    \end{split}
\end{align}
\newline
Die Regelung, welche in \autoref{sec:Zustandsregler} entworfen wird soll dafür sorgen, dass das Pendel in der oberen Ruhelage verweilt. Diese wird beschrieben durch:

\begin{align}\label{eq:Gleichung3.11}
    \begin{split}
        \underline{x}_{\mathrm{2}}^{*}=
        \begin{bmatrix}
            x_{\mathrm{1}}^{*} \\
            x_{\mathrm{2}}^{*} \\
            x_{\mathrm{3}}^{*} \\
            x_{\mathrm{4}}^{*}
        \end{bmatrix}=
        \begin{bmatrix}
            0 \\
            0 \\
            0 \\
            0
        \end{bmatrix}
    \end{split}
\end{align}
\newline
Die allgemeine Form des \textbf{linearen Zustandsraummodells} lautet:

\begin{empheq}[box=\widefbox]{align} \label{eq:Gleichung3.12}
    \begin{split}
        \dot{\underline{x}} &= \underline{A}\cdot\underline{x}+\underline{B}\cdot\underline{u} \\
        \underline{y} &= \underline{C}\cdot\underline{x}+\underline{D}\cdot\underline{u}
    \end{split}
\end{empheq}
Wendet man nun die Linearisierungsvorschrift aus \autoref{eq:Gleichung3.9} unter Nutzung der Ruhelagen an, so erhält man das konkrete linearisierte Zustandsraummodell für das System. In \autoref{eq:Gleichung3.13} ist das linearisierte Zustandsraummodell für die obere Ruhelage und in \autoref{eq:Gleichung3.14} das für die untere Ruhelage dargestellt.

\begin{empheq}[box=\widefbox]{align} \label{eq:Gleichung3.13}
    \begin{split}
        \Delta{\dot{\underline{x}}}&=
        \begin{bmatrix}
            0           & 1         & 0 & 0         \\
            -50.9760    & -1.2328   & 0 & 0.1960    \\
            0           & 0         & 0 & 1         \\
            50.9760     & 1.2328    & 0 & -11.3323
        \end{bmatrix}\cdot\Delta\underline{x}+
        \begin{bmatrix}
            0       \\
            -1.9548 \\
            0       \\
            113.0101
        \end{bmatrix}\cdot V_{\mathrm{m}}
        \\
        \Delta{\underline{y}} &=
        \begin{bmatrix}
            1 & 0 & 0 & 0 \\
            0 & 0 & 1 & 0
        \end{bmatrix}\cdot\Delta\underline{x}+\underline{0}\cdot V_{\mathrm{m}}
    \end{split}
\end{empheq}

\begin{empheq}[box=\widefbox]{align} \label{eq:Gleichung3.14}
    \begin{split}
        \Delta{\dot{\underline{x}}}&=
        \begin{bmatrix}
            0           & 1         & 0 & 0         \\
            50.9760     & -1.2328   & 0 & 0.1960    \\
            0           & 0         & 0 & 1         \\
            -50.9760    & 1.2328    & 0 & -11.3323
        \end{bmatrix}\cdot\Delta\underline{x}+
        \begin{bmatrix}
            0       \\
            -1.9548 \\
            0       \\
            113.0101
        \end{bmatrix}\cdot V_{\mathrm{m}}
        \\
        \Delta{\underline{y}} &=
        \begin{bmatrix}
            1 & 0 & 0 & 0 \\
            0 & 0 & 1 & 0
        \end{bmatrix}\cdot\Delta\underline{x}+\underline{0}\cdot V_{\mathrm{m}}
    \end{split}
\end{empheq}